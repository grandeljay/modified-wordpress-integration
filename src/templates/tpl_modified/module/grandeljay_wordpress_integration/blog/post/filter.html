{config_load file="$language/modules/blog/grandeljay_wordpress_integration.conf" section="posts_filter"}

<div class="filter">
    <h2>{#filter_title#}</h2>

    <form method="get">
        <div class="category_and_search">
            {if $categories}
                <div class="category">
                    <select name="category_id">
                        {if $category}
                            <option value="">- {#filter_category#} -</option>
                        {else}
                            <option value="" selected="selected">- {#filter_category#} -</option>
                        {/if}

                        {foreach $categories as $category_item}
                            {if $category && $category.id === $category_item.id}
                                <option value="{$category_item.id}" selected>{$category_item.name}</option>
                            {else}
                                <option value="{$category_item.id}">{$category_item.name}</option>
                            {/if}
                        {/foreach}
                    </select>
                </div>
            {/if}

            <div class="search">
                {if $smarty.get.search}
                    <input type="text" name="search" placeholder="{$form_input_placeholder}" value="{$smarty.get.search}">
                {else}
                    <input type="text" name="search" placeholder="{$form_input_placeholder}">
                {/if}
            </div>
        </div>

        {if $filter_tags}
            <div class="tags">
                {foreach $filter_tags as $filter_tag}
                    <label>
                        {if $filter_tag.is_active}
                            <input type="checkbox" name="tag_id[]" value="{$filter_tag.id}" checked="checked">
                        {else}
                            <input type="checkbox" name="tag_id[]" value="{$filter_tag.id}">
                        {/if}

                        <div class="tag">
                            {$filter_tag.name}
                        </div>
                    </label>
                {/foreach}
            </div>
        {/if}

        {if $category_tags}
            {foreach $category_tags as $category_tag}
                <label>
                    <input type="checkbox" name="tag_id" value="{$category_tag.id}">
                    {$category_tag.name}
                </label>
            {/foreach}
        {/if}

        <div class="actions">
            <input type="submit" value="{#filter_submit#}">
            <a href="{$filter_reset_link}">{#filter_reset#}</a>
        </div>
    </form>
</div>
